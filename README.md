# GeoBot - Telegram –±–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ —Å–ø–ª–∞–≤–æ–≤ –Ω–∞ —Å–∞–ø–±–æ—Ä–¥–µ

–ë–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–ø–ª–∞–≤–æ–≤ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π GPX —Ç—Ä–µ–∫–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä –ó–∞–≥—Ä—É–∑–∫–∞ GPX —Ç—Ä–µ–∫–æ–≤
- üìà –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ, —Å–∫–æ—Ä–æ—Å—Ç—å, –≤—ã—Å–æ—Ç–∞)
- üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- üì∑ –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å–ø–ª–∞–≤–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–ª–∞–≤–æ–≤
- üìâ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥ (–¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü/–≥–æ–¥)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://.../geobot.git
   cd geobot
   ```

2. –°–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```
   *(–í –¥–∞–ª—å–Ω–µ–π—à–µ–º, –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞ –∏–ª–∏ —Ä–∞–±–æ—Ç–æ–π —Å –ø—Ä–æ–µ–∫—Ç–æ–º, –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π `source .venv/bin/activate`)*

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```bash
   cp .env.example .env
   ```
   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.env`:
   - `ADMIN_ID` - –≤–∞—à Telegram ID
   - `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
   - `WEBHOOK_URL` - URL –¥–ª—è –≤–µ–±—Ö—É–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ó–∞–ø—É—Å–∫

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
```bash
./run.sh
```

–ò–ª–∏, –±–æ–ª–µ–µ —è–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è –º–æ–¥—É–ª—å Python (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è CI/CD):
```bash
python -m bot.main
```

### –° –ø–æ–ª–∏–Ω–≥–æ–º (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥ –≤—ã—à–µ.

### –° –≤–µ–±—Ö—É–∫–æ–º (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥ –≤—ã—à–µ.

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–±—Ö—É–∫–∞:
```nginx
location /webhook {
    proxy_pass http://localhost:8000/webhook;
}
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/list` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–ø–ª–∞–≤–æ–≤
- `/stats [day|week|month|year|all]` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/last` - –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ø–ª–∞–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
geobot/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # —Ö—ç–Ω–¥–ª–µ—Ä—ã –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ track.py         # –∑–∞–≥—Ä—É–∑–∫–∞ GPX
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ media.py         # —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list.py          # —Å–ø–∏—Å–æ–∫ —Å–ø–ª–∞–≤–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ view.py          # –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–ª–∞–≤–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit.py          # —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ delete.py        # —É–¥–∞–ª–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats.py         # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ services/            # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gpx_parser.py    # –ø–∞—Ä—Å–∏–Ω–≥ GPX
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.py    # —Ä–∞—Å—á—ë—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ graphics.py      # –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ models/              # –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îú‚îÄ‚îÄ trip.py          # —Å–ø–ª–∞–≤
‚îÇ       ‚îî‚îÄ‚îÄ media.py         # –º–µ–¥–∏–∞
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ db.py                # SQLite
‚îú‚îÄ‚îÄ data/                    # —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ tracks/
‚îÇ   ‚îú‚îÄ‚îÄ media/
‚îÇ   ‚îî‚îÄ‚îÄ graphics/
‚îú‚îÄ‚îÄ config.py                # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
